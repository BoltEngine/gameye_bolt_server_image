cmd:
  - -batchmode
  - -nographics
  - -logFile
  - -port
  - ${port.server}
  - -query
  - ${port.query}

script:
  initialState: idle
  states:
    idle:
      events:
        - type: literal
          pattern: STATE_CHANGE_TO_PLAY
          ignoreCase: true
          nextState: playing
        - type: timer
          interval: 900000 # 1000 * 60 * 15 = 15 minutes
          nextState: end
    playing:
      events:
        - type: literal
          value: STATE_CHANGE_TO_END
          nextState: end
    end:
      events:
        - type: timer
          interval: 60000 # 60 seconds
          nextState: quit
  transitions:
    - to: idle
      command: |
        echo "Idle..."
    - to: playing
      command: |
        echo "Playing..."
    - to: end
      command: |
        echo "End..."
    - to: quit
      command: |
        echo "Quit..."

defaults:
  port.server: "60001"
  port.query: "21777"
  port.masterServer1: "5055"
  port.masterServer2: "27001"
  port.gameServer1: "5056"
  port.gameServer2: "27002"
  port.nameServer1: "5058"
  port.nameServer2: "27000"
